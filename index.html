<!DOCTYPE html>
<html lang="en">
<head>
    <!--
      Quick notes for future edits:
      - Add new input fields inside the "Input and Control Area" div.
      - Use a clear id like `docMyField` and then reference it in `script.js`.
      - The preview is rendered by `updatePreview()` in `script.js`.
      - The PDF is generated by `downloadPDF()` in `script.js` — use APP.pdf for layout config.
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Template Generator</title>
    <!-- Load Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <!-- Set Inter font for document look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 min-h-screen font-[Inter]">

    <!-- Load jsPDF library for client-side PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!--
        script.js expects the jsPDF lib to be loaded above. If you move scripts around, keep this order
        or add `defer` attributes and ensure proper load order.
    -->

    <div class="container mx-auto max-w-4xl pt-8 pb-16">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Document Template Editor</h1>

        <!-- Input and Control Area -->
        <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg mb-8 border border-gray-200">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Document Details</h2>

            <!-- Company Info -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label for="docCompany" class="block text-sm font-medium text-gray-700 mb-1">Ragione Sociale</label>
                    <input type="text" id="docCompany" value="Vaccari S.r.l." class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docAddress" class="block text-sm font-medium text-gray-700 mb-1">Sede Legale</label>
                    <input type="text" id="docAddress" value="Via E.Alighieri, 2" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docCity" class="block text-sm font-medium text-gray-700 mb-1">Città</label>
                    <input type="text" id="docCity" value="35016 CADONEGHE (PD) - I" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docPhone" class="block text-sm font-medium text-gray-700 mb-1">Telefono/Fax</label>
                    <input type="text" id="docPhone" value="Tel: 049 5942474 - Fax 049 8982471" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docFiscal" class="block text-sm font-medium text-gray-700 mb-1">Dati Fiscali</label>
                    <input type="text" id="docFiscal" value="Capitale Sociale: € 100.000,00 i.v. - C.C.I.A.A. Padova N. REA 320264 - Reg.Imp.Trib.PD P.IVA IT 02856320285" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docOfferNum" class="block text-sm font-medium text-gray-700 mb-1">Numero Offerta</label>
                    <input type="text" id="docOfferNum" value="173/2023/SE" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docRef" class="block text-sm font-medium text-gray-700 mb-1">Riferimento</label>
                    <input type="text" id="docRef" value="VACCARI GIANCARLO" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
                <div>
                    <label for="docDate" class="block text-sm font-medium text-gray-700 mb-1">Data</label>
                    <input type="text" id="docDate" value="03/10/2023" class="w-full p-2 border border-gray-300 rounded-lg">
                </div>
            </div>

            <!-- Destinatario -->
            <div class="border-t pt-4 mt-4 mb-6">
                <h3 class="text-lg font-medium text-gray-700 mb-3">Destinatario</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label for="destName" class="block text-sm font-medium text-gray-700 mb-1">Spettabile</label>
                        <input type="text" id="destName" value="ECO GAIA Srl" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="destAddress" class="block text-sm font-medium text-gray-700 mb-1">Via</label>
                        <input type="text" id="destAddress" value="Via Camp 2/B - Via Dante Alighieri, 2" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="destCity" class="block text-sm font-medium text-gray-700 mb-1">Città</label>
                        <input type="text" id="destCity" value="35016 - CADONEGHE - PD - I" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="destContact" class="block text-sm font-medium text-gray-700 mb-1">Interlocutore</label>
                            <input type="text" id="destContact" value="Sig. Matteo Giura" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label for="destPhone" class="block text-sm font-medium text-gray-700 mb-1">Telefono/Fax</label>
                            <input type="text" id="destPhone" value="049 2133947 - 345-6474910" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                    <div>
                        <label for="destEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="text" id="destEmail" value="info@eco-gaia.it" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                </div>
            </div>

            <!-- Descrizione Servizio -->
            <div class="border-t pt-4 mt-4 mb-6">
                <h3 class="text-lg font-medium text-gray-700 mb-3">Descrizione Servizio</h3>
                <div class="grid grid-cols-1 gap-4">
                    <div>
                        <label for="serviceDesc" class="block text-sm font-medium text-gray-700 mb-1">Descrizione</label>
                        <input type="text" id="serviceDesc" value="Trasporto di Rifiuti Speciali con Bilica Vasca" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="serviceRoute" class="block text-sm font-medium text-gray-700 mb-1">Tratta</label>
                        <input type="text" id="serviceRoute" value="TEZZE DI ARZIGNANO (VI) - GREZZANA (VR)" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="servicePrice" class="block text-sm font-medium text-gray-700 mb-1">Prezzo</label>
                        <input type="text" id="servicePrice" value="€/TON. 9,50+IVA" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="serviceMaterial" class="block text-sm font-medium text-gray-700 mb-1">Materiale/CER</label>
                        <input type="text" id="serviceMaterial" value="Materiale/CER: 170504" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="serviceCIG" class="block text-sm font-medium text-gray-700 mb-1">CIG</label>
                            <input type="text" id="serviceCIG" value="Z89156O8AD" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                        <div>
                            <label for="serviceCUP" class="block text-sm font-medium text-gray-700 mb-1">CUP</label>
                            <input type="text" id="serviceCUP" value="H61F11000280001" class="w-full p-2 border border-gray-300 rounded-lg">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Condizioni -->
            <div class="border-t pt-4 mt-4 mb-6">
                <h3 class="text-lg font-medium text-gray-700 mb-3">Condizioni</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="condMinTax" class="block text-sm font-medium text-gray-700 mb-1">Minimo Tassabile</label>
                        <input type="text" id="condMinTax" value="28 Ton." class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="condLoadTime" class="block text-sm font-medium text-gray-700 mb-1">Tempi Carico</label>
                        <input type="text" id="condLoadTime" value="Ore 01 (Una)" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="condUnloadTime" class="block text-sm font-medium text-gray-700 mb-1">Tempi Scarico</label>
                        <input type="text" id="condUnloadTime" value="Ore 01 (Una)" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="condExtraCost" class="block text-sm font-medium text-gray-700 mb-1">Extra Sosta</label>
                        <input type="text" id="condExtraCost" value="€./Ora 65,00+IVA" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="condMuncato" class="block text-sm font-medium text-gray-700 mb-1">Mancato Carico</label>
                        <input type="text" id="condMuncato" value="80% del Viaggio" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="condDeadline" class="block text-sm font-medium text-gray-700 mb-1">Data Fine</label>
                        <input type="text" id="condDeadline" value="31/12/2023" class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="condPayment" class="block text-sm font-medium text-gray-700 mb-1">Pagamento</label>
                        <input type="text" id="condPayment" value="BONIFICO BANCARIO 60 GG." class="w-full p-2 border border-gray-300 rounded-lg">
                    </div>
                </div>
            </div>

            <!-- Testo di chiusura -->
            <div class="border-t pt-4 mt-4 mb-6">
                <label for="closingText" class="block text-sm font-medium text-gray-700 mb-1">Testo di chiusura</label>
                <textarea id="closingText" rows="2" class="w-full p-3 border border-gray-300 rounded-lg">In attesa di un Vostro gradito riscontro salutiamo cordialmente.</textarea>
            </div>

            <!-- Download Button -->
            <button id="download-btn" onclick="downloadPDF()" class="w-full md:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                </svg>
                Download Document as PDF
            </button>
        </div>

        <!-- Document Preview Area -->
        <div class="p-6 md:p-10 bg-white rounded-xl shadow-inner border border-gray-300">
            <h2 class="text-2xl font-bold text-center text-gray-700 mb-4 border-b pb-2">Live Document Preview</h2>
            <div id="document-preview" class="p-6 bg-gray-50 border border-dashed border-gray-300 rounded-lg">
                <!-- Content will be injected here by JavaScript -->
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>